---
# Role variables

# Versions

wso2am_effective_version: >-
  {{ (wso2am_version == "latest")
     | ternary(wso2am_latest_version, wso2am_version) }}

wso2am_installed_version: >-
  {{ ansible_local.wso2am.version | default("0") }}

# Official download variables

wso2am_official_download_host: https://github.com
wso2am_official_download_releases_path: /wso2/product-apim/releases

wso2am_official_download_releases_url: >-
  {{ wso2am_official_download_host
     + "/"
     + wso2am_official_download_releases_path }}

wso2am_official_download_path: >-
  {{ wso2am_official_download_releases_path
     + "/download/v"
     + wso2am_effective_version }}

wso2am_official_download_file: "wso2am-{{ wso2am_effective_version }}.zip"

# Indicate if install is required

wso2am_install_required: >-
  {{ wso2am_effective_version
     is not version((wso2am_installed_version | string | length > 0)
                     | ternary(wso2am_installed_version, "0"),
                     "==")
     and wso2am_state == "present" }}

# Packages

wso2am_pakages_os:
  all:
    all:
      java: present
      java-devel: present
      tar: present
      unzip: present
      rsync: present

# Paths

wso2am_systemd_service_path: /lib/systemd/system/wso2am.service
wso2am_keystore_dir: "{{ wso2am_dir }}/repository/resources/security"
wso2am_deployment_path: "{{ wso2am_dir }}/repository/conf/deployment.toml"
wso2am_facts_file_path: /etc/ansible/facts.d/wso2am.fact
