[Unit]
Description=WSO2 APi Manager
Requires=network-online.target
After=network-online.target

[Service]
Type=forking
RemainAfterExit=yes
ExecStart={{ wso2am_dir }}/bin/wso2server.sh start
ExecStop={{ wso2am_dir }}/bin/wso2server.sh stop
Environment="JAVA_HOME={{ wso2am_java_home }}"
Environment="CARBON_HOME={{ wso2am_dir }}"
Environment="JAVA_OPTS={{ wso2am_java_opts | join(' ') }}"
Environment="JVM_MEM_OPTS='{{ wso2am_java_memory_opts | join(' ') }}'"
User={{ wso2am_user }}
Group={{ wso2am_group }}
LimitNPROC={{ wso2am_limit_nproc }}
LimitNOFILE={{ wso2am_limit_no_file }}

[Install]
WantedBy=multi-user.target
