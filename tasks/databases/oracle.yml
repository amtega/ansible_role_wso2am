---
# Oracle config tasks

- block:
    - name: Dowmload jdbc connector
      import_role: amtega_mysql_jdbc_connector
      vars:
        oracle_jdbc_connector_version: "{{ wsoam_database_drivers[oracle].version}}"
        oracle_jdbc_connector_user: "{{ wsoam_database_drivers[oracle].dowmload_user}}"
        oracle_jdbc_connector_password: "{{ wsoam_database_drivers[oracle].dowmload_password}}"

    - name: Copy jdbc jar to wsoam lib directory
      copy:
        src: "{{ oracle_jdbc_connector_ojdbc8_jar_path }}"
        dest: "{{ wso2am_dir }}/repository/components/lib/"
        remote_src: yes

    - name: Fill databases
      import_tasks: import_oracle.yml
      loop: "{{ wsoam_databases }}"
      loop_control:
        loop_var: wsoam_database
      when: wsoam_databases_fill
  tags:
    - role::wso2am
    - role::wso2am::databases
